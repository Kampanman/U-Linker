# [【nonses-01】ログインフォーム]

- 【nonses-01】機能説明
  - 特徴・機能
    - アカウントを持っているユーザーがサービスにログインする為のログインフォーム
    - ログインに成功すると、ブラウザがリロードされ、ログインセッション開始となる
  - 関連機能
    - [【nonses-02】ユーザー新規登録フォーム]
    - [【nonses-03】パスワードリセットメール送信フォーム]
  - 関連変数
    - flag.isLoginFormOpen（boolean 型。初期状態は false）
- 【nonses-01-01】新規登録ボタン（プラスアイコン）
  - 特徴・機能
    - 押下すると、この[【nonses-01】ログインフォーム]は閉じられる
    - 代わって、[【nonses-02】ユーザー新規登録フォーム]が表示される
  - 関連変数
    - flag.isAccountRegistFormOpen（boolean 型。初期状態は false）
- 【nonses-01-02】ログイン ID（email アドレス）入力欄
  - 特徴・機能
    - アカウントを有するユーザーのログイン ID を入力できる
    - 「ログイン ID（email アドレス）」のラベルを入力欄に設定する
    - ログイン時はその入力内容が、[ulinker_accounts.email]と合致している必要がある
  - 関連変数
    - loginForm.loginId（String 型）
- 【nonses-01-03】パスワード入力欄
  - 特徴・機能
    - アカウントを有するユーザーのパスワードを入力できる
    - 「パスワード（半角英数字 8 文字以上 16 文字以内）」のラベルを入力欄に設定する
    - ログイン時はその入力内容をハッシュ化した値が、[ulinker_accounts.password]と合致している必要がある
      - ハッシュ化したパスワードの合致判定は API（PHP のソースコード）側で行う
  - 関連変数
    - loginForm.password（String 型）
- 【nonses-01-04】ログインボタン
  - 特徴・機能
    - 初期状態は非活性
      - ログイン ID（email アドレス）入力欄とパスワード入力欄が、両方とも入力済みの状態になると活性化する
    - バリデーションを実施した上で、入力内容を API に送り、レスポンスを受け取る
      - バリデーションでは以下の判定を行う
        - ログイン ID がメールアドレスの形式ではない
        - ログイン ID に（全角文字などの）不適切な文字が含まれている
        - パスワードが半角英数字 8 文字以上 16 文字以内の形式ではない
      - レスポンスが、合致アカウントありを意味する判定であれば、ログイン成功を伝えるメッセージを表示する
        - 合致アカウントがない場合は、ログイン失敗のメッセージを表示する
          - ログイン ID またはパスワードが誤っているようであるというメッセージ
        - ログイン成功メッセージ表示の 3 秒後にブラウザがリロードされ、ログインセッション開始となる
        - ブラウザリロード後であるが、ログインセッション開始とともに次の処理も行われる
          - loginUser に[ulinker_accounts]に格納されたアカウントの情報が格納される
          - ログインしたユーザーの[ulinker_accounts.token]と[ulinker_accounts.token_limit]が NULL にリセットされる
    - サーバー側 API に送信するオブジェクト変数「param」には、次の内容を格納する
      - 『email: loginForm.loginId』
      - 『password: loginForm.password』
      - 『token: {ランダムな半角英数字 16 文字}』
  - 関連変数
    - loginForm（Object 型）
- 【nonses-01-05】リセットボタン
  - 特徴・機能
    - ログイン ID（email アドレス）入力欄とパスワード入力欄を、両方とも空白状態に戻す
      - つまり loginForm.loginId と loginForm.password が両方とも空文字状態となる
  - 関連変数
    - 設定なし
- 【nonses-01-06】「パスワードを忘れた方」リンク
  - 特徴・機能
    - 押下すると、この[【nonses-01】ログインフォーム]は閉じられる
    - 代わって、[【nonses-03】パスワードリセットメール送信フォーム]が表示される
  - 関連変数
    - flag.isPasswordResetMailFormOpen（boolean 型。初期状態は false）
