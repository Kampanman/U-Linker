# [【nonses-02】ユーザー新規登録フォーム]

- 【nonses-02】機能説明
  - 特徴・機能
    - アカウントを新規で登録するためのフォーム
    - アカウントの登録に成功すると、ブラウザがリロードされる
      - リロード後はそのアカウントでのログインが可能となる
  - 関連機能
    - 設定なし
  - 関連変数
    - flag.isAccountRegistFormOpen（boolean 型。初期状態は false）
- 【nonses-02-01】ユーザー名入力欄
  - 特徴・機能
    - 登録するアカウントのユーザー名を入力できる
    - 「ユーザー名」のラベルを入力欄に設定する
    - 長さは半角全角両方可能で 30 文字以内
    - 入力必須の項目
  - 関連変数
    - accountRegistUpdateForm.userName（String 型）
- 【nonses-02-02】ログイン ID（email アドレス）入力欄
  - 特徴・機能
    - 登録するアカウントのログイン ID（email アドレス）を入力できる
    - 「ログイン ID（email アドレス）」のラベルを入力欄に設定する
    - メールアドレス形式の必要あり。半角英数字と一部特殊記号の入力が可能
    - 長さは 100 文字以内
    - 入力必須の項目
  - 関連変数
    - accountRegistUpdateForm.loginId（String 型）
- 【nonses-02-03】パスワード入力欄(1)
  - 特徴・機能
    - 登録するアカウントのパスワードを入力できる
    - 「パスワード（半角英数字 8 文字以上 16 文字以内）」のラベルを入力欄に設定する
    - 長さは半角英数字 8 文字以上 16 字以内
    - 入力必須の項目
  - 関連変数
    - accountRegistUpdateForm.password1（String 型）
- 【nonses-02-04】パスワード入力欄(2)
  - 特徴・機能
    - 登録するアカウントのパスワードを入力できる
    - 「パスワード（半角英数字 8 文字以上 16 文字以内）」のラベルを入力欄に設定する
    - パスワード入力欄(1)の入力内容と合致している必要がある
    - 入力必須の項目
  - 関連変数
    - accountRegistUpdateForm.password2（String 型）
- 【nonses-02-05】ユーザーコメント入力欄
  - 特徴・機能
    - 登録するアカウントのユーザーが任意に設定できるコメントを入力できる
    - 「コメント」のラベルを入力欄に設定する
    - 入力は任意
    - 長さは半角全角両方可能で 100 文字以内
  - 関連変数
    - accountRegistUpdateForm.comment（String 型）
- 【nonses-02-06】新規登録ボタン
  - 特徴・機能
    - 初期状態は非活性
      - ユーザーコメント入力欄以外の入力欄がすべて入力済みの状態になると活性化する
        - ユーザーコメント入力欄が空白状態となっても、非活性にはならない
    - バリデーションを実施した上で、入力内容を API に送り、レスポンスを受け取る
      - バリデーションでは以下の判定を行う
        - ユーザー名に不適切な文字（半角の特殊な記号）が含まれている
        - ログイン ID がメールアドレスの形式ではない
        - ログイン ID に（全角文字などの）不適切な文字が含まれている
        - パスワード(1)が半角英数字 8 文字以上 16 文字以内の形式ではない
        - パスワード(1)とパスワード(2)が合致していない
      - 変数「accountRegistUpdateForm.isTeacher」は、自動的に 0 に設定される
      - 変数「accountRegistUpdateForm.comment」は、以下の右の文字が左のエスケープ文字に変換された状態になる
        - ["&#39;","(半角シングルクォーテーション)"]
        - ["&quot;","(半角ダブルクォーテーション)"]
        - ["&com;","(半角カンマ)"]
        - ["&amp;","(半角アンパサンド)"]
        - ["&lt;","(半角小なり)"]
        - ["&gt;","(半角大なり)"]
        - ["&nbsp;","(半角スペース)"]
        - ["&yen;","(半角円マーク)"]
        - ["&copy;","(コピーライト)"]
      - ユーザー情報登録更新確認モーダルを表示する。以下はこのモーダルで「はい」を選択した場合
        - ユーザー情報の登録・更新処理のための非同期通信が実行される
        - 非同期通信後はレスポンスが返却されるので、結果のメッセージをユーザー情報登録更新完了モーダルに表示する
          - 登録・更新処理に登録に失敗した場合はそのメッセージを表示する
          - 登録・更新処理に成功した場合は、完了した旨のメッセージを表示する
        - 登録・更新処理に成功した場合、3 秒後にブラウザがリロードされる
    - サーバー側 API に送信するオブジェクト変数「param」には、次の内容を格納する
      - 『type: "regist"』
      - 『userName: accountRegistUpdateForm.userName』
      - 『email: accountRegistUpdateForm.loginId』
      - 『password: accountRegistUpdateForm.password1』
      - 『isTeacher: 0』
      - 『isOwner: 0』
      - 『comment: accountRegistUpdateForm.comment』
      - 『token: {ランダムな半角英数字 16 文字}』
  - 関連変数
    - accountRegistUpdateForm（Object 型）
    - dialog.isUserRegistUpdateConfirmOpen（boolean 型。初期状態は false）
    - dialog.isUserRegistUpdateCompleteOpen（boolean 型。初期状態は false）
- 【nonses-02-07】リセットボタン
  - 特徴・機能
    - フォーム内のすべての入力欄を空白状態に戻す
      - つまり accountRegistUpdateForm のすべてのプロパティが空文字状態となる
  - 関連変数
    - 設定なし
